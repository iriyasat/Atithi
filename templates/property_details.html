{% extends "base.html" %}

{% block title %}Property Details - Atithi{% endblock %}

{% block content %}
<div class="max-w-5xl mx-auto py-8 px-4 sm:px-6 lg:px-8">
    <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
        <div>
            <div class="aspect-w-16 aspect-h-9 mb-4">
                <img src="{{ property.images[0].image_url if property.images else url_for('static', filename='assets/images/default-property.svg') }}" alt="{{ property.title }}" class="rounded-lg object-cover w-full h-72">
            </div>
            <div class="flex gap-2 overflow-x-auto">
                {% for image in property.images %}
                <img src="{{ image.image_url }}" alt="{{ property.title }}" class="h-16 w-24 object-cover rounded border">
                {% endfor %}
            </div>
        </div>
        <div>
            <h1 class="text-3xl font-bold text-gray-900 mb-2">{{ property.title }}</h1>
            <p class="text-gray-500 mb-2"><i class="fas fa-map-marker-alt mr-1"></i> {{ property.location }}</p>
            <div class="flex items-center mb-4">
                <span class="text-primary-700 font-bold text-2xl">à§³{{ property.price_per_night }}</span>
                <span class="ml-2 text-gray-500">/ night</span>
            </div>
            <p class="mb-4">{{ property.description }}</p>
            <div class="mb-4">
                <h2 class="text-lg font-semibold mb-2">Amenities</h2>
                <ul class="list-disc list-inside text-gray-700">
                    {% for amenity in property.amenities %}
                    <li>{{ amenity }}</li>
                    {% endfor %}
                </ul>
            </div>
            <form method="post" action="{{ url_for('book_property', property_id=property.id) }}" class="space-y-4">
                <div class="flex gap-2">
                    <input type="date" name="check_in" required class="px-4 py-2 border rounded-md focus:ring-primary-500 focus:border-primary-500">
                    <input type="date" name="check_out" required class="px-4 py-2 border rounded-md focus:ring-primary-500 focus:border-primary-500">
                </div>
                <input type="number" name="guests" min="1" max="{{ property.max_guests }}" value="1" class="px-4 py-2 border rounded-md focus:ring-primary-500 focus:border-primary-500" required>
                <button type="submit" class="w-full px-6 py-2 bg-primary-600 text-white rounded-md hover:bg-primary-700">Book Now</button>
            </form>
        </div>
    </div>
    <div class="mt-10">
        <h2 class="text-2xl font-bold mb-4">Reviews</h2>
        <div class="space-y-4">
            {% for review in property.reviews %}
            <div class="bg-white rounded-lg shadow p-4">
                <div class="flex items-center mb-2">
                    <span class="font-semibold text-gray-900">{{ review.user.first_name }} {{ review.user.last_name }}</span>
                    <span class="ml-2 text-yellow-500">
                        {% for i in range(review.rating) %}<i class="fas fa-star"></i>{% endfor %}
                    </span>
                    <span class="ml-auto text-xs text-gray-400">{{ review.created_at.strftime('%Y-%m-%d') }}</span>
                </div>
                <p class="text-gray-700">{{ review.comment }}</p>
            </div>
            {% else %}
            <div class="text-gray-500">No reviews yet.</div>
            {% endfor %}
        </div>
    </div>
</div>
{% endblock %} 